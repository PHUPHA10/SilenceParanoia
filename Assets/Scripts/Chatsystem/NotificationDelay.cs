using UnityEngine;

public class NotificationDelay : MonoBehaviour
{
    public RectTransform notificationUI;   // UI ??? Notification (???????? RectTransform)
    public float delayTime = 10f;          // ?????????
    public float moveSpeed = 300f;         // ?????????????????????

    public RectTransform pointA;           // ???????? (?????)
    public RectTransform pointB;           // ????????????? UI ????????

    private bool startMove = false;

    void Start()
    {
        if (notificationUI != null)
        {
            // ???????????????????????? (pointA)
            notificationUI.anchoredPosition = pointA.anchoredPosition;
            notificationUI.gameObject.SetActive(false);
        }

        Invoke(nameof(ShowAndMove), delayTime);
    }

    void ShowAndMove()
    {
        if (notificationUI != null)
        {
            notificationUI.gameObject.SetActive(true);
            startMove = true;   // ?????????????????????
        }
    }

    void Update()
    {
        if (!startMove) return;

        // ?????????????????? pointB
        notificationUI.anchoredPosition = Vector2.MoveTowards(
            notificationUI.anchoredPosition,
            pointB.anchoredPosition,
            moveSpeed * Time.deltaTime
        );

        // ??????????????????????????????????????
        if (Vector2.Distance(notificationUI.anchoredPosition, pointB.anchoredPosition) < 0.1f)
        {
            startMove = false;
        }
    }
}
