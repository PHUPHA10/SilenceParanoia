using UnityEngine;
using UnityEngine.UI;

public class ChatSwitcher : MonoBehaviour
{
    [Header("???????????????????")]
    public GameObject[] chatPanels;          // [0] = ???????? 1, [1] = ???????? 2 ...

    [Header("?????????? (???????????????? chatPanels)")]
    public RectTransform[] profileImages;    // [0] = ???????? 1, [1] = ???????? 2 ...

    // ??????????????????? (???????? 0)
    private int currentIndex = 0;

    void Start()
    {
        OpenChat(0);  // ?????????????????????
    }

    public void OpenChat(int index)
    {
        // ???????????????????? -> ?????????????????
        if (index != currentIndex)
        {
            SwapProfilePositions(currentIndex, index);
        }

        // ????/????????????????? index
        for (int i = 0; i < chatPanels.Length; i++)
        {
            if (chatPanels[i] != null)
                chatPanels[i].SetActive(i == index);
        }

        currentIndex = index;
    }

    void SwapProfilePositions(int a, int b)
    {
        if (profileImages == null) return;
        if (a < 0 || b < 0) return;
        if (a >= profileImages.Length || b >= profileImages.Length) return;

        // ???? anchoredPosition ????????????
        Vector2 temp = profileImages[a].anchoredPosition;
        profileImages[a].anchoredPosition = profileImages[b].anchoredPosition;
        profileImages[b].anchoredPosition = temp;
    }
}
